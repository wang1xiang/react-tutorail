<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.7"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, data) => {
        const {
          Markmap
        } = getMarkmap();
        window.mm = Markmap.create('svg#mindmap', getOptions == null ? void 0 : getOptions(), data);
      })(() => window.markmap,null,{"t":"heading","d":1,"p":{"lines":[0,1]},"v":"react-philosophies react 哲学","c":[{"t":"heading","d":2,"p":{"lines":[2,3]},"v":"1.The Bare Minimum 最低要求","c":[{"t":"heading","d":3,"p":{"lines":[4,5]},"v":"1.1 Recognize when the computer is smarter than you 计算机比你更聪明","c":[{"t":"list_item","d":5,"p":{"lines":[6,7],"index":1},"v":"1. 使用 Eslint 静态分析代码，启用<a href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\">钩子规则</a>捕获特定 react 错误"},{"t":"list_item","d":5,"p":{"lines":[7,8],"index":2},"v":"2. 开启严格模式"},{"t":"list_item","d":5,"p":{"lines":[8,9],"index":3},"v":"3. 诚实对待你的依赖。修改 useMemo、useCallback 和 useEffect 的警告/错误。"},{"t":"list_item","d":5,"p":{"lines":[9,10],"index":4},"v":"4. 使用 map 时，必须加 key"},{"t":"list_item","d":5,"p":{"lines":[10,11],"index":5},"v":"5. 只在顶级使用钩子，不要在循环、条件或嵌套函数中调用 Hook"},{"t":"list_item","d":5,"p":{"lines":[11,12],"index":6},"v":"6. 理解警告“无法对未安装的组件执行状态更新”, <a href=\"https://github.com/facebook/react/pull/22114\">react/pull</a>"},{"t":"list_item","d":5,"p":{"lines":[12,13],"index":7},"v":"7. 在应用程序不同级别添加多个错误边界来防止“白屏死机”，使用 Sentry 监控"},{"t":"list_item","d":5,"p":{"lines":[13,14],"index":8},"v":"8. 不要忽略了控制台中打印的错误和警告。"},{"t":"list_item","d":5,"p":{"lines":[14,15],"index":9},"v":"9. 记得要 <a href=\"https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.js.org%2Fguides%2Ftree-shaking%2F\"><code>tree-shaking</code></a>!"},{"t":"list_item","d":5,"p":{"lines":[15,16],"index":10},"v":"10. 使用 prettier 格式化代码"}]},{"t":"heading","d":3,"p":{"lines":[17,18]},"v":"1.2 Code is just a necessary evil 代码只是一种必要的邪恶","c":[{"t":"list_item","d":5,"p":{"lines":[19,20],"index":1},"v":"1. 在添加另一个依赖项之前先考虑一下","c":[{"t":"list_item","d":7,"p":{"lines":[20,21]},"v":"真的需要 Redux 吗？这是可能的。但请记住，React 已经是一个状态管理库"},{"t":"list_item","d":7,"p":{"lines":[21,22]},"v":"<a href=\"https://lodash.com/\"><code>Lodash</code></a>/<a href=\"https://underscorejs.org/\"><code>underscoreJS</code></a>? <a href=\"https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore\">you-dont-need/You-Dont-Need-Lodash-Underscore</a>"},{"t":"list_item","d":7,"p":{"lines":[22,23]},"v":"<a href=\"https://momentjs.com/\"><code>MomentJS</code></a>? <a href=\"https://github.com/you-dont-need/You-Dont-Need-Momentjs\">you-dont-need/You-Dont-Need-Momentjs</a>"},{"t":"list_item","d":7,"p":{"lines":[23,24]},"v":"你甚至可能不需要 Javascript。 CSS 很强大。<a href=\"https://github.com/you-dont-need/You-Dont-Need-JavaScript\">you-dont-need/You-Dont-Need-JavaScript</a>"}]}]},{"t":"heading","d":3,"p":{"lines":[25,26]},"v":"1.3 Leave it better than you fount it 让它比你发现发更好","c":[{"t":"list_item","d":5,"p":{"lines":[27,28],"index":1},"v":"1. 检测代码异味并在需要时对其进行处理（代码异味并不一定意味需要更改代码，只是有更好的方法可以实现相同的功能）","c":[{"t":"list_item","d":7,"p":{"lines":[28,29]},"v":"使用大量参数定义的方法或函数"},{"t":"list_item","d":7,"p":{"lines":[29,30]},"v":"难以理解的 Boolean 逻辑"},{"t":"list_item","d":7,"p":{"lines":[30,31]},"v":"单个文件中的代码行过多"},{"t":"list_item","d":7,"p":{"lines":[31,32]},"v":"语法相同的重复代码（但格式可能不同）"},{"t":"list_item","d":7,"p":{"lines":[32,33]},"v":"可能难以理解的功能或方法"},{"t":"list_item","d":7,"p":{"lines":[33,34]},"v":"用大量函数或方法定义的类/组件"},{"t":"list_item","d":7,"p":{"lines":[34,35]},"v":"单个函数或方法中的代码行数过多"},{"t":"list_item","d":7,"p":{"lines":[35,36]},"v":"具有大量返回语句的函数或方法"}]},{"t":"list_item","d":5,"p":{"lines":[36,37],"index":2},"v":"2. 无情的重构。简单胜于复杂","c":[{"t":"list_item","d":7,"p":{"lines":[37,38]},"v":"如果可以的话，简化复杂的条件并尽早退出"},{"t":"list_item","d":7,"p":{"lines":[39,41]},"v":""}]}]},{"t":"heading","d":3,"p":{"lines":[41,42]},"v":"1.4 You can do better 你可以做得更好","c":[{"t":"list_item","d":5,"p":{"lines":[43,44],"index":1},"v":"1. 请记住，你可能不需要将状态作为依赖项，因为您可以传递回调函数"},{"t":"list_item","d":5,"p":{"lines":[54,55],"index":2},"v":"2. 用钩子包装你的自定义上下文会创建一个更好看的 API"},{"t":"list_item","d":5,"p":{"lines":[84,85],"index":3},"v":"3. 在编码之前考虑如何使用您的组件，写 README 文档，写清楚组件 API"}]}]},{"t":"heading","d":2,"p":{"lines":[86,87]},"v":"2. Design for happiness 面向幸福设计","c":[{"t":"list_item","d":4,"p":{"lines":[90,91],"index":1},"v":"1. 通过删除冗余状态来避免状态管理复杂性"},{"t":"list_item","d":4,"p":{"lines":[91,93],"index":2},"v":"2. 传递香蕉，而不是拿着香蕉的大猩猩和整个丛林（组件需要什么传递什么，而不是传递大对象）<br>\n为了避免落入这个陷阱，最好将主要的原始类型（boolean、string、number 等）作为道具传递（如果想使用 React.memo 进行优化，传递原语是一个好主意）"},{"t":"list_item","d":4,"p":{"lines":[127,129],"index":3},"v":"3. 保持组件小而简单——单一责任原则<br>\n具备各种职责的组件难以重用，可能与其他代码纠缠在一起"},{"t":"list_item","d":4,"p":{"lines":[130,131],"index":4},"v":"4. 重复比错误的抽象要便宜得多（避免过早/不恰当的泛化）"},{"t":"list_item","d":4,"p":{"lines":[131,132],"index":5},"v":"5. 必满 Prop 层层传递（prop 钻取，prop drilling）"},{"t":"list_item","d":4,"p":{"lines":[132,133],"index":6},"v":"6. 将巨大的 useEffect 拆分为更小的独立的"},{"t":"list_item","d":4,"p":{"lines":[133,134],"index":7},"v":"7. 将逻辑提取到钩子和辅助函数中"},{"t":"list_item","d":4,"p":{"lines":[134,135],"index":8},"v":"8. useCallback、useMemo 和 useEffect 依赖数组中的依赖项组好是基本类型"},{"t":"list_item","d":4,"p":{"lines":[135,136],"index":9},"v":"9. 不要再 useCallback、useMemo 和 useEffect 中放置过多的依赖项"},{"t":"list_item","d":4,"p":{"lines":[136,137],"index":10},"v":"10. 为简单起见，如果你的状态的某些值依赖于你的状态和先前状态的其他值，请考虑使用 useReducer，而不是使用多个 useState ?? useMemo 为什么不适用呢"},{"t":"list_item","d":4,"p":{"lines":[137,138],"index":11},"v":"11. Context 放在组件树中尽可能低的位置，尽可能靠近它们相关/正在使用的位置"}]},{"t":"heading","d":2,"p":{"lines":[139,140]},"v":"Performance Tips 性能优化","c":[{"t":"ordered_list","d":3,"p":{"lines":[141,152],"start":1},"v":"","c":[{"t":"list_item","d":4,"p":{"lines":[141,142],"index":1},"v":"1. 使用 useMemo 用于昂贵的计算"},{"t":"list_item","d":4,"p":{"lines":[142,143],"index":2},"v":"2. 如果打算使用 memo、useMemo 或 useCallback 来减少重新渲染，不应该有过多的依赖关系，并且依赖关系应该主要是原始类型"},{"t":"list_item","d":4,"p":{"lines":[143,144],"index":3},"v":"3. 确保 memo、useMemo 或 useCallback 正在做你认为它正在做的事情（它真的阻止重新渲染了吗？）您能否凭经验证明在您的案例中使用它们可以显着提高性能？"},{"t":"list_item","d":4,"p":{"lines":[144,145],"index":4},"v":"4. <a href=\"https://kentcdodds.com/blog/fix-the-slow-render-before-you-fix-the-re-render\">在修复重新渲染之前修复慢速渲染</a>"},{"t":"list_item","d":4,"p":{"lines":[145,146],"index":5},"v":"5. 状态托管：使你的状态尽可能的靠近使用它的位置不仅会使代码更易于阅读，而且会使应用程序更快"},{"t":"list_item","d":4,"p":{"lines":[146,147],"index":6},"v":"6. Context 应该在逻辑上分开，不要再一个 Context Provider 中添加多个值，如果 Context 中的任何值发生更改，则使用该 Context 的所有组件都会重新渲染，即使这些组件未使用实际更改的值"},{"t":"list_item","d":4,"p":{"lines":[147,148],"index":7},"v":"7. 你可以通过拆分 state 和 disppatch 来优化 Context"},{"t":"list_item","d":4,"p":{"lines":[148,149],"index":8},"v":"8. 了解术语 lazy loading 和 bundle/code splitting"},{"t":"list_item","d":4,"p":{"lines":[149,150],"index":9},"v":"9. 长列表使用 react-virtual 类似"},{"t":"list_item","d":4,"p":{"lines":[150,151],"index":10},"v":"10. 使用 source-map-explorer 工具可视化生成的代码包，包体积越小，app 越快"}]},{"t":"bullet_list","d":3,"p":{"lines":[154,163]},"v":"","c":[{"t":"list_item","d":4,"p":{"lines":[154,155]},"v":"<a href=\"https://kentcdodds.com/blog/state-colocation-will-make-your-react-app-faster\">KCD: State Colocation will make your React app faster</a>"},{"t":"list_item","d":4,"p":{"lines":[155,156]},"v":"<a href=\"https://kentcdodds.com/blog/usememo-and-usecallback\">KCD: When to <code>useMemo</code> and <code>useCallback</code></a>"},{"t":"list_item","d":4,"p":{"lines":[156,157]},"v":"<a href=\"https://kentcdodds.com/blog/fix-the-slow-render-before-you-fix-the-re-render\">KCD: Fix the slow render before you fix the re-render</a>"},{"t":"list_item","d":4,"p":{"lines":[157,158]},"v":"<a href=\"https://kentcdodds.com/blog/profile-a-react-app-for-performance\">KCD: Profile a React App for Performance</a>"},{"t":"list_item","d":4,"p":{"lines":[158,159]},"v":"<a href=\"https://kentcdodds.com/blog/how-to-optimize-your-context-value\">KCD: How to optimize your context value</a>"},{"t":"list_item","d":4,"p":{"lines":[159,160]},"v":"<a href=\"https://kentcdodds.com/blog/how-to-use-react-context-effectively\">KCD: How to use React Context effectively</a>"},{"t":"list_item","d":4,"p":{"lines":[160,161]},"v":"<a href=\"https://epicreact.dev/one-react-mistake-thats-slowing-you-down\">KCD: One React Mistake that is slowing you down</a>"},{"t":"list_item","d":4,"p":{"lines":[161,162]},"v":"<a href=\"https://kentcdodds.com/blog/optimize-react-re-renders\">KCD: One simple trick to optimize React re-renders</a>"}]}]},{"t":"heading","d":2,"p":{"lines":[163,164]},"v":"Testing principles 测试原则","c":[{"t":"list_item","d":4,"p":{"lines":[165,166],"index":1},"v":"1. 测试应该始终与软件的使用方式相似"},{"t":"list_item","d":4,"p":{"lines":[166,167],"index":2},"v":"2. 确保不是在测试一些边界细节（用户不会使用，看不到甚至感知不到的内容）"},{"t":"list_item","d":4,"p":{"lines":[167,168],"index":3},"v":"3. 如果果你的测试不能让你对自己的代码产生信任，那测试就是无意义的"},{"t":"list_item","d":4,"p":{"lines":[168,169],"index":4},"v":"4. 如果你正在重构某个代码，且最后实现的功能都是完全一致的，其实几乎不需要修改测试，而且可以通过测试结果来判定你正确的重构了"},{"t":"list_item","d":4,"p":{"lines":[169,170],"index":5},"v":"5. 测试应该让开发更有效率，而不是减慢开发速度"},{"t":"list_item","d":4,"p":{"lines":[170,171],"index":6},"v":"6. 使用 <a href=\"https://jestjs.io/\">Jest</a>, <a href=\"https://testing-library.com/docs/react-testing-library/intro/\">React testing library</a>, <a href=\"https://www.cypress.io/\">Cypress</a>, and <a href=\"https://github.com/mswjs/msw\">Mock service worker</a>"}]},{"t":"heading","d":2,"p":{"lines":[172,173]},"v":"Insights shared by others 与他人分享见解"}]})</script>
</body>
</html>
